import{h as $,i as S,O as I,o as u,c as j,w as i,a as e,t as n,b as o,j as d,v as p,u as f,d as g,f as O,k as V,F as C}from"./app-4aad6063.js";import{_ as B}from"./AppLayout-8af38d3b.js";import{r as h,_ as P,T as U,p as D}from"./TablePagination-2f584390.js";import{_ as N}from"./Breadcrumb-7b30273a.js";import{_ as A}from"./SelectInput-da88faf6.js";import{_ as E}from"./TextInput-64b9543c.js";import F from"./Create-a18cf963.js";import T from"./Edit-ddd2dd87.js";import G from"./Delete-4efc29ff.js";import L from"./DeleteBulk-2c2cbf77.js";import{_ as M}from"./Checkbox-4f1f6885.js";import"./Toast-76ee8389.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./XMarkIcon-c562f47a.js";import"./SwitchLocale-0fa88c9e.js";import"./ApplicationLogo-8b97767a.js";import"./DialogModal-aaf4c057.js";import"./Modal-246df657.js";import"./InputError-a644ff26.js";import"./InputLabel-06d31f6a.js";import"./PrimaryButton-7e998bed.js";import"./SecondaryButton-66f1fe03.js";import"./PlusIcon-eb2d3292.js";import"./ActionButton-cbf46b04.js";import"./PencilIcon-4ad1fdd4.js";import"./ConfirmationModal-8bd1e1f7.js";import"./DangerButton-f09c0e22.js";import"./TrashIcon-ba825236.js";const q={class:"py-6"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-4"},H={class:"bg-white dark:bg-slate-800 overflow-hidden shadow sm:rounded"},J={class:"flex shrink-0 rounded overflow-hidden"},K={class:"flex justify-end items-center gap-2"},Q={class:"flex space-x-2"},R={class:"p-4 text-left"},W=e("th",{class:"p-4 text-center"},"#",-1),X={class:"flex justify-between items-center"},Y={class:"flex justify-between items-center"},Z=e("span",null,"Guard",-1),ee={class:"flex justify-between items-center"},te=e("th",{class:"p-4 text-center sr-only"},"Action",-1),se={class:"whitespace-nowrap px-4 py-2"},ae=["value"],re={class:"whitespace-nowrap px-4 py-2 text-center"},le={class:"whitespace-nowrap px-4 py-2"},oe={class:"whitespace-nowrap px-4 py-2"},ie={class:"whitespace-nowrap px-4 py-2"},ne={class:"whitespace-nowrap flex justify-end px-4 py-2"},de={class:"flex w-fit rounded overflow-hidden"},Fe={__name:"Index",props:{title:String,filters:Object,permissions:Object,breadcrumbs:Object,perPage:Number},setup(_){const{_:k,debounce:w,pickBy:v}=D,l=_,t=$({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,perPage:l.perPage},selectedId:[],multipleSelect:!1,permission:null}),c=r=>{t.params.field=r,t.params.order=t.params.order==="asc"?"desc":"asc"};S(()=>k.cloneDeep(t.params),w(()=>{let r=v(t.params);I.get(route("permission.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const y=r=>{var s;r.target.checked===!1?t.selectedId=[]:(s=l.permissions)==null||s.data.forEach(a=>{t.selectedId.push(a.id)})},x=()=>{var r;((r=l.permissions)==null?void 0:r.data.length)==t.selectedId.length?t.multipleSelect=!0:t.multipleSelect=!1};return(r,s)=>(u(),j(B,{title:l.title},{title:i(()=>[e("span",null,n(l.title),1)]),breadcrumb:i(()=>[o(N)]),default:i(()=>[e("div",q,[e("div",z,[e("div",H,[o(U,null,{"table-action":i(()=>[e("div",J,[d(o(F,{title:l.title},null,8,["title"]),[[p,r.can(["permission create"])]]),d(o(L,{selectedId:t.selectedId,title:l.title,onClose:s[0]||(s[0]=a=>(t.selectedId=[],t.multipleSelect=!1))},null,8,["selectedId","title"]),[[p,t.selectedId.length!=0&&r.can(["permission delete"])]])]),e("div",K,[e("div",Q,[o(A,{class:"h-9 text-sm",modelValue:t.params.perPage,"onUpdate:modelValue":s[1]||(s[1]=a=>t.params.perPage=a),dataSet:r.$page.props.app.perpage},null,8,["modelValue","dataSet"])]),o(E,{modelValue:t.params.search,"onUpdate:modelValue":s[2]||(s[2]=a=>t.params.search=a),type:"search",class:"block h-9",placeholder:r.lang().placeholder.search},null,8,["modelValue","placeholder"])])]),"table-head":i(()=>[e("tr",null,[e("th",R,[o(M,{checked:t.multipleSelect,"onUpdate:checked":s[3]||(s[3]=a=>t.multipleSelect=a),onChange:y},null,8,["checked"])]),W,e("th",{class:"p-4 cursor-pointer",onClick:s[4]||(s[4]=a=>c("name"))},[e("div",X,[e("span",null,n(r.lang().label.name),1),o(f(h),{class:"w-4 h-4"})])]),e("th",{class:"p-4 cursor-pointer",onClick:s[5]||(s[5]=a=>c("guard_name"))},[e("div",Y,[Z,o(f(h),{class:"w-4 h-4"})])]),e("th",{class:"p-4 cursor-pointer",onClick:s[6]||(s[6]=a=>c("created_at"))},[e("div",ee,[e("span",null,n(r.lang().label.created),1),o(f(h),{class:"w-4 h-4"})])]),te])]),"table-body":i(()=>[(u(!0),g(C,null,O(_.permissions.data,(a,b)=>(u(),g("tr",{key:b,class:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-200/30 hover:dark:bg-slate-900/20"},[e("td",se,[d(e("input",{class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:x,value:a.id,"onUpdate:modelValue":s[7]||(s[7]=m=>t.selectedId=m)},null,40,ae),[[V,t.selectedId]])]),e("td",re,n(++b),1),e("td",le,n(a.name),1),e("td",oe,n(a.guard_name),1),e("td",ie,n(a.created_at),1),e("td",ne,[e("div",de,[d(o(T,{title:l.title,permission:t.permission,onOpen:m=>t.permission=a},null,8,["title","permission","onOpen"]),[[p,r.can(["permission update"])]]),d(o(G,{title:l.title,permission:t.permission,onOpen:m=>t.permission=a},null,8,["title","permission","onOpen"]),[[p,r.can(["permission delete"])]])])])]))),128))]),"table-pagination":i(()=>[o(P,{links:l.permissions,filters:t.params},null,8,["links","filters"])]),_:1})])])])]),_:1},8,["title"]))}};export{Fe as default};
