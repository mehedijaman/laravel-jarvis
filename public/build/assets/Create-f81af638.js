import{r as B,v as F,p as M,d,b as s,w as i,h as v,o as u,u as r,a as o,t as n,f as h,F as k,g as y,n as w,s as N,z as U}from"./app-612c9f56.js";import{_ as D}from"./Checkbox-39319b2a.js";import{_ as P}from"./DialogModal-b215c394.js";import{_ as A,a as S}from"./TextInput-c35aa270.js";import{_ as f}from"./InputLabel-fa3aec6e.js";import{_ as x}from"./PrimaryButton-c2e14bbc.js";import{_ as I}from"./SecondaryButton-5199ef5e.js";import{P as L}from"./index-58945aca.js";import"./Modal-139f0cdb.js";const O={class:"hidden md:block"},T=["onSubmit"],q={class:"space-y-1"},G={class:"flex justify-start items-center space-x-2 mt-2"},H={class:"font-semibold text-primary capitalize"},J={class:"flex flex-wrap gap-4 mt-1 mb-4"},K=["id","value"],ae={__name:"Create",props:{title:String,permissions:Object},setup(C){const p=C,_=B(!1),e=F({name:"",guard_name:"web",permissions:[]}),m=M({multipleSelect:!1}),b=()=>{e.post(route("role.store"),{preserveScroll:!0,onSuccess:()=>g(),onError:()=>null,onFinish:()=>null})},g=()=>{_.value=!1,e.errors={},e.reset(),m.multipleSelect=!1},$=l=>{l.target.checked===!1?e.permissions=[]:(e.permissions=[],p.permissions.forEach(a=>{a.data.forEach(t=>{e.permissions.push(t.id)})}))},V=()=>{p.permissions.reduce((l,a)=>l+a.data.length,0)==e.permissions.length?m.multipleSelect=!0:m.multipleSelect=!1};return(l,a)=>(u(),d("div",null,[s(x,{class:"flex rounded-none items-center justify-start gap-2",onClick:a[0]||(a[0]=v(t=>_.value=!0,["prevent"]))},{default:i(()=>[s(r(L),{class:"w-4 h-auto"}),o("span",O,n(l.lang().label.add),1)]),_:1}),s(P,{show:_.value,onClose:g,"max-width":"md"},{title:i(()=>[h(n(l.lang().label.add)+" "+n(p.title),1)]),content:i(()=>[o("form",{class:"space-y-2",onSubmit:v(b,["prevent"])},[o("div",q,[s(f,{for:"name",value:l.lang().label.name},null,8,["value"]),s(A,{id:"name",modelValue:r(e).name,"onUpdate:modelValue":a[1]||(a[1]=t=>r(e).name=t),type:"text",class:"block w-full",autocomplete:"name",placeholder:l.lang().placeholder.role_name,error:r(e).errors.name},null,8,["modelValue","placeholder","error"]),s(S,{message:r(e).errors.name},null,8,["message"])]),o("div",null,[s(f,{value:l.lang().label.permissions},null,8,["value"]),s(S,{class:"mt-2",message:r(e).errors.permissions},null,8,["message"]),o("div",G,[s(D,{id:"permission-all",checked:m.multipleSelect,"onUpdate:checked":a[2]||(a[2]=t=>m.multipleSelect=t),onChange:$},null,8,["checked"]),s(f,{for:"permission-all",value:l.lang().label.check_all},null,8,["value"])]),(u(!0),d(k,null,y(p.permissions,(t,j)=>(u(),d("div",{class:"mt-2",key:j},[o("p",H,n(t.group),1),o("div",J,[(u(!0),d(k,null,y(t.data,(c,E)=>(u(),d("div",{class:"flex items-center justify-start space-x-2",key:E},[N(o("input",{onChange:V,class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+c.id,value:c.id,"onUpdate:modelValue":a[3]||(a[3]=z=>r(e).permissions=z)},null,40,K),[[U,r(e).permissions]]),s(f,{for:"permission_"+c.id},{default:i(()=>[o("p",{class:w(c.name=="delete"?"text-red-500 font-semibold":"")},n(c.name),3)]),_:2},1032,["for"])]))),128))])]))),128))])],40,T)]),footer:i(()=>[s(I,{onClick:g},{default:i(()=>[h(n(l.lang().button.cancel),1)]),_:1}),s(x,{class:w(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:b},{default:i(()=>[h(n(l.lang().button.save)+" "+n(r(e).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{ae as default};
