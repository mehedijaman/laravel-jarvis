import{r as E,p as j,v as B,A as D,d as v,s as k,c as F,w as n,h as y,b as r,z as M,o as u,u as o,f as h,t as c,a as m,F as N,g as U,n as z,y as A}from"./app-eab3f989.js";import{_ as O}from"./DialogModal-1bf515e7.js";import{_ as I,a as S}from"./TextInput-23a06216.js";import{_ as f}from"./InputLabel-43358e44.js";import{_ as L}from"./ActionButton-3fb3b8c3.js";import{_ as P}from"./PrimaryButton-61f62ac6.js";import{_ as T}from"./SecondaryButton-2ed5517a.js";import{a as q}from"./index-84f7c941.js";import{_ as G}from"./Checkbox-82d25b7d.js";import"./Modal-d427e275.js";const H=["onSubmit"],J={class:"space-y-1"},K={class:"flex justify-start items-center space-x-2 mt-2"},Q={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},R=["id","value"],te={__name:"Edit",props:{title:String,permissions:Object,role:Object},emits:["open"],setup(w,{emit:C}){const t=w,p=E(!1),i=j({multipleSelect:!1}),e=B({name:"",guard_name:"web",permissions:[]});D(()=>{var s,l,d,a;p&&(e.name=(s=t.role)==null?void 0:s.name,e.permissions=(d=(l=t.role)==null?void 0:l.permissions)==null?void 0:d.map(_=>_.id)),t.permissions.length==((a=t.role)==null?void 0:a.permissions.length)?i.multipleSelect=!0:i.multipleSelect=!1});const b=()=>{var s;e.put(route("role.update",(s=t.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>g(),onError:()=>null,onFinish:()=>null})},g=()=>{p.value=!1,e.errors={},e.reset(),i.multipleSelect=!1},$=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],t.permissions.forEach(l=>{e.permissions.push(l.id)}))},V=()=>{t.permissions.length==e.permissions.length?i.multipleSelect=!0:i.multipleSelect=!1};return(s,l)=>{const d=M("tooltip");return u(),v("div",null,[k((u(),F(L,{onClick:l[0]||(l[0]=y(a=>(p.value=!0,C("open")),["prevent"]))},{default:n(()=>[r(o(q),{class:"w-4 h-auto"})]),_:1})),[[d,s.lang().label.edit]]),r(O,{show:p.value,onClose:g},{title:n(()=>[h(c(s.lang().label.edit)+" "+c(t.title),1)]),content:n(()=>[m("form",{class:"space-y-2",onSubmit:y(b,["prevent"])},[m("div",J,[r(f,{for:"name",value:s.lang().label.name},null,8,["value"]),r(I,{id:"name",modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=a=>o(e).name=a),type:"text",class:"block w-full",autocomplete:"name",placeholder:s.lang().placeholder.role_name,error:o(e).errors.name},null,8,["modelValue","placeholder","error"]),r(S,{message:o(e).errors.name},null,8,["message"])]),m("div",null,[r(f,{value:s.lang().label.permissions},null,8,["value"]),r(S,{class:"mt-2",message:o(e).errors.permissions},null,8,["message"]),m("div",K,[r(G,{id:"permission-all",checked:i.multipleSelect,"onUpdate:checked":l[2]||(l[2]=a=>i.multipleSelect=a),onChange:$},null,8,["checked"]),r(f,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),m("div",Q,[(u(!0),v(N,null,U(t.permissions,(a,_)=>(u(),v("div",{class:"flex items-center justify-start space-x-2",key:_},[k(m("input",{onChange:V,class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+a.id,value:a.id,"onUpdate:modelValue":l[3]||(l[3]=x=>o(e).permissions=x)},null,40,R),[[A,o(e).permissions]]),r(f,{for:"permission_"+a.id,value:a.name},null,8,["for","value"])]))),128))])])],40,H)]),footer:n(()=>[r(T,{onClick:g},{default:n(()=>[h(c(s.lang().button.cancel),1)]),_:1}),r(P,{class:z(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing,onClick:b},{default:n(()=>[h(c(s.lang().button.save)+" "+c(o(e).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])])}}};export{te as default};
