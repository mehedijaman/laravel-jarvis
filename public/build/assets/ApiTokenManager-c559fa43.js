import{v as h,r as y,d as u,b as a,w as l,a as r,e as _,o as d,f as i,t as s,u as o,F as $,g as C,n as S}from"./app-8a8114d3.js";import{_ as U}from"./ActionMessage-17ba2c3b.js";import{_ as x}from"./ActionSection-ee461527.js";import{_ as T}from"./Checkbox-b2fe42f0.js";import{_ as z}from"./ConfirmationModal-7cad4827.js";import{_ as E}from"./DangerButton-eaa420cd.js";import{_ as w}from"./DialogModal-46e7b357.js";import{_ as L}from"./FormSection-3367ab13.js";import{_ as M,a as q}from"./TextInput-918b0315.js";import{_ as P}from"./InputLabel-afcc1449.js";import{_ as V}from"./PrimaryButton-876445f6.js";import{_ as A}from"./SecondaryButton-f0877f07.js";import{S as G}from"./SectionBorder-b41be0ce.js";import"./SectionTitle-b04e05b0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-d5c900f3.js";import"./index-2a30d0c3.js";const H={class:"col-span-6 sm:col-span-4"},I={key:0,class:"col-span-6"},J={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"flex items-center"},O={class:"ml-2 text-sm text-slate-600 dark:text-slate-400"},Q={key:0},R={class:"mt-10 sm:mt-0"},W={class:"space-y-6"},X={class:"break-all dark:text-white"},Y={class:"flex items-center ml-2"},Z={key:0,class:"text-sm text-slate-400"},ee=["onClick"],se=["onClick"],le={key:0,class:"mt-4 bg-slate-100 dark:bg-slate-900 px-4 py-2 rounded font-mono text-sm text-slate-500 break-all"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex items-center"},ne={class:"ml-2 text-sm text-slate-600 dark:text-slate-400"},Se={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(c){const m=h({name:"",permissions:c.defaultPermissions}),p=h({permissions:[]}),k=h({}),b=y(!1),g=y(null),f=y(null),F=()=>{m.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{b.value=!0,m.reset()}})},B=e=>{p.permissions=e.abilities,g.value=e},N=()=>{p.put(route("api-tokens.update",g.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>g.value=null})},j=e=>{f.value=e},D=()=>{k.delete(route("api-tokens.destroy",f.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>f.value=null})};return(e,n)=>(d(),u("div",null,[a(L,{onSubmitted:F},{title:l(()=>[i(s(e.lang().label.create_api_token),1)]),description:l(()=>[i(s(e.lang().label.create_api_token_caption),1)]),form:l(()=>[r("div",H,[a(P,{for:"name",value:e.lang().label.token_name},null,8,["value"]),a(M,{id:"name",modelValue:o(m).name,"onUpdate:modelValue":n[0]||(n[0]=t=>o(m).name=t),type:"text",class:"mt-1 block w-full",autofocus:"",placeholder:e.lang().placeholder.token_name,error:o(m).errors.name},null,8,["modelValue","placeholder","error"]),a(q,{message:o(m).errors.name,class:"mt-2"},null,8,["message"])]),c.availablePermissions.length>0?(d(),u("div",I,[a(P,{for:"permissions",value:e.lang().label.permissions},null,8,["value"]),r("div",J,[(d(!0),u($,null,C(c.availablePermissions,t=>(d(),u("div",{key:t},[r("label",K,[a(T,{checked:o(m).permissions,"onUpdate:checked":n[1]||(n[1]=v=>o(m).permissions=v),value:t},null,8,["checked","value"]),r("span",O,s(t),1)])]))),128))])])):_("",!0)]),actions:l(()=>[a(U,{on:o(m).recentlySuccessful,class:"mr-3"},{default:l(()=>[i(s(e.lang().label.created),1)]),_:1},8,["on"]),a(V,{class:S({"opacity-25":o(m).processing}),disabled:o(m).processing},{default:l(()=>[i(s(e.lang().button.create)+" "+s(o(m).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1}),c.tokens.length>0?(d(),u("div",Q,[a(G),r("div",R,[a(x,null,{title:l(()=>[i(s(e.lang().label.manage_api_tokens),1)]),description:l(()=>[i(s(e.lang().label.manage_api_tokens_caption),1)]),content:l(()=>[r("div",W,[(d(!0),u($,null,C(c.tokens,t=>(d(),u("div",{key:t.id,class:"flex items-center justify-between"},[r("div",X,s(t.name),1),r("div",Y,[t.last_used_ago?(d(),u("div",Z,s(e.lang().label.last_used)+" "+s(t.last_used_ago),1)):_("",!0),c.availablePermissions.length>0?(d(),u("button",{key:1,class:"cursor-pointer ml-6 text-sm text-slate-400 underline",onClick:v=>B(t)},s(e.lang().button.permissions),9,ee)):_("",!0),r("button",{class:"cursor-pointer ml-6 text-sm text-rose-500",onClick:v=>j(t)},s(e.lang().button.delete),9,se)])]))),128))])]),_:1})])])):_("",!0),a(w,{show:b.value,onClose:n[3]||(n[3]=t=>b.value=!1)},{title:l(()=>[i(s(e.lang().label.api_token),1)]),content:l(()=>[r("div",null,s(e.lang().label.api_token_caption),1),e.$page.props.jetstream.flash.token?(d(),u("div",le,s(e.$page.props.jetstream.flash.token),1)):_("",!0)]),footer:l(()=>[a(A,{onClick:n[2]||(n[2]=t=>b.value=!1)},{default:l(()=>[i(s(e.lang().button.close),1)]),_:1})]),_:1},8,["show"]),a(w,{show:g.value!=null,onClose:n[6]||(n[6]=t=>g.value=null)},{title:l(()=>[i(s(e.lang().label.api_token_permissions),1)]),content:l(()=>[r("div",te,[(d(!0),u($,null,C(c.availablePermissions,t=>(d(),u("div",{key:t},[r("label",ae,[a(T,{checked:o(p).permissions,"onUpdate:checked":n[4]||(n[4]=v=>o(p).permissions=v),value:t},null,8,["checked","value"]),r("span",ne,s(t),1)])]))),128))])]),footer:l(()=>[a(A,{onClick:n[5]||(n[5]=t=>g.value=null)},{default:l(()=>[i(s(e.lang().button.cancel),1)]),_:1}),a(V,{class:S(["ml-3",{"opacity-25":o(p).processing}]),disabled:o(p).processing,onClick:N},{default:l(()=>[i(s(e.lang().button.save)+" "+s(o(p).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(z,{show:f.value!=null,onClose:n[8]||(n[8]=t=>f.value=null)},{title:l(()=>[i(s(e.lang().label.delete_api_token),1)]),content:l(()=>[i(s(e.lang().label.delete_api_token_caption),1)]),footer:l(()=>[a(A,{onClick:n[7]||(n[7]=t=>f.value=null)},{default:l(()=>[i(s(e.lang().button.cancel),1)]),_:1}),a(E,{class:S(["ml-3",{"opacity-25":o(k).processing}]),disabled:o(k).processing,onClick:D},{default:l(()=>[i(s(e.lang().button.delete)+" "+s(o(k).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Se as default};
