import{r as B,p as E,v as j,B as D,d as h,s as k,c as F,w as n,h as y,b as r,A as K,o as u,u as o,f as b,t as c,a as m,z as M,F as N,g as U,n as z,y as A}from"./app-3090723e.js";import{_ as O}from"./DialogModal-3b600741.js";import{_ as I,a as S}from"./TextInput-996d0443.js";import{_ as f}from"./InputLabel-4e68c593.js";import{_ as L}from"./ActionButton-0bf3748b.js";import{_ as P}from"./PrimaryButton-8e2ff8b6.js";import{_ as T}from"./SecondaryButton-1cbb1913.js";import{a as q}from"./index-edb1a843.js";import{_ as G}from"./Checkbox-06f3fb41.js";import"./Modal-27113ebd.js";const H=["onSubmit"],J={class:"space-y-1"},Q={class:"flex justify-start items-center space-x-2 mt-2"},R={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},W=["id","value"],ie={__name:"Edit",props:{title:String,permissions:Object,role:Object},emits:["open"],setup(w,{emit:C}){const t=w,p=B(!1),i=E({multipleSelect:!1}),e=j({name:"",guard_name:"web",permissions:[]});D(()=>{var s,l,d,a;p&&(e.name=(s=t.role)==null?void 0:s.name,e.permissions=(d=(l=t.role)==null?void 0:l.permissions)==null?void 0:d.map(v=>v.id)),t.permissions.length==((a=t.role)==null?void 0:a.permissions.length)?i.multipleSelect=!0:i.multipleSelect=!1});const g=()=>{var s;e.put(route("role.update",(s=t.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>_(),onError:()=>null,onFinish:()=>null})},_=()=>{p.value=!1,e.errors={},e.reset(),i.multipleSelect=!1},$=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],t.permissions.forEach(l=>{e.permissions.push(l.id)}))},V=()=>{t.permissions.length==e.permissions.length?i.multipleSelect=!0:i.multipleSelect=!1};return(s,l)=>{const d=K("tooltip");return u(),h("div",null,[k((u(),F(L,{onClick:l[0]||(l[0]=y(a=>(p.value=!0,C("open")),["prevent"]))},{default:n(()=>[r(o(q),{class:"w-4 h-auto"})]),_:1})),[[d,s.lang().label.edit]]),r(O,{show:p.value,onClose:_},{title:n(()=>[b(c(s.lang().label.edit)+" "+c(t.title),1)]),content:n(()=>[m("form",{class:"space-y-2",onSubmit:y(g,["prevent"])},[m("div",J,[r(f,{for:"name",value:s.lang().label.name},null,8,["value"]),r(I,{id:"name",modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=a=>o(e).name=a),type:"text",class:"block w-full",autocomplete:"name",placeholder:s.lang().placeholder.role_name,error:o(e).errors.name,onKeyup:M(g,["enter"])},null,8,["modelValue","placeholder","error","onKeyup"]),r(S,{message:o(e).errors.name},null,8,["message"])]),m("div",null,[r(f,{value:s.lang().label.permissions},null,8,["value"]),r(S,{class:"mt-2",message:o(e).errors.permissions},null,8,["message"]),m("div",Q,[r(G,{id:"permission-all",checked:i.multipleSelect,"onUpdate:checked":l[2]||(l[2]=a=>i.multipleSelect=a),onChange:$},null,8,["checked"]),r(f,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),m("div",R,[(u(!0),h(N,null,U(t.permissions,(a,v)=>(u(),h("div",{class:"flex items-center justify-start space-x-2",key:v},[k(m("input",{onChange:V,class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+a.id,value:a.id,"onUpdate:modelValue":l[3]||(l[3]=x=>o(e).permissions=x)},null,40,W),[[A,o(e).permissions]]),r(f,{for:"permission_"+a.id,value:a.name},null,8,["for","value"])]))),128))])])],40,H)]),footer:n(()=>[r(T,{onClick:_},{default:n(()=>[b(c(s.lang().button.cancel),1)]),_:1}),r(P,{class:z(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing,onClick:g},{default:n(()=>[b(c(s.lang().button.save)+" "+c(o(e).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])])}}};export{ie as default};
