import{r as B,p as j,v as E,B as U,d as v,s as k,c as D,w as n,h as y,b as r,z as F,o as u,u as o,f as h,t as c,a as m,F as M,g as N,n as z,y as O}from"./app-9e114f29.js";import{_ as A}from"./DialogModal-1b9381d0.js";import{_ as I,a as S}from"./TextInput-8d76c5bf.js";import{_ as f}from"./InputLabel-828d6852.js";import{_ as L}from"./ActionButton-5b15799f.js";import{_ as P}from"./PrimaryButton-67943313.js";import{_ as T}from"./SecondaryButton-c58d7f7f.js";import{a as q}from"./index-862ff028.js";import{_ as G}from"./Checkbox-5f06c1db.js";import"./Modal-0dfaef43.js";const H=["onSubmit"],J={class:"space-y-1"},K={class:"flex justify-start items-center space-x-2 mt-2"},Q={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},R=["id","value"],te={__name:"Edit",props:{title:String,permissions:Object,role:Object},emits:["open"],setup(w,{emit:C}){const t=w,p=B(!1),i=j({multipleSelect:!1}),e=E({name:"",guard_name:"web",permissions:[]});U(()=>{var s,l,d,a;p&&(e.name=(s=t.role)==null?void 0:s.name,e.permissions=(d=(l=t.role)==null?void 0:l.permissions)==null?void 0:d.map(_=>_.id)),t.permissions.length==((a=t.role)==null?void 0:a.permissions.length)?i.multipleSelect=!0:i.multipleSelect=!1});const b=()=>{var s;e.put(route("role.update",(s=t.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>g(),onError:()=>null,onFinish:()=>null})},g=()=>{p.value=!1,e.errors={},e.reset(),i.multipleSelect=!1},$=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],t.permissions.forEach(l=>{e.permissions.push(l.id)}))},x=()=>{t.permissions.length==e.permissions.length?i.multipleSelect=!0:i.multipleSelect=!1};return(s,l)=>{const d=F("tooltip");return u(),v("div",null,[k((u(),D(L,{onClick:l[0]||(l[0]=y(a=>(p.value=!0,C("open")),["prevent"]))},{default:n(()=>[r(o(q),{class:"w-4 h-auto"})]),_:1})),[[d,s.lang().label.edit]]),r(A,{show:p.value,onClose:g,"max-width":"2xl"},{title:n(()=>[h(c(s.lang().label.edit)+" "+c(t.title),1)]),content:n(()=>[m("form",{class:"space-y-2",onSubmit:y(b,["prevent"])},[m("div",J,[r(f,{for:"name",value:s.lang().label.name},null,8,["value"]),r(I,{id:"name",modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=a=>o(e).name=a),type:"text",class:"block w-full",autocomplete:"name",placeholder:s.lang().placeholder.role_name,error:o(e).errors.name},null,8,["modelValue","placeholder","error"]),r(S,{message:o(e).errors.name},null,8,["message"])]),m("div",null,[r(f,{value:s.lang().label.permissions},null,8,["value"]),r(S,{class:"mt-2",message:o(e).errors.permissions},null,8,["message"]),m("div",K,[r(G,{id:"permission-all",checked:i.multipleSelect,"onUpdate:checked":l[2]||(l[2]=a=>i.multipleSelect=a),onChange:$},null,8,["checked"]),r(f,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),m("div",Q,[(u(!0),v(M,null,N(t.permissions,(a,_)=>(u(),v("div",{class:"flex items-center justify-start space-x-2",key:_},[k(m("input",{onChange:x,class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+a.id,value:a.id,"onUpdate:modelValue":l[3]||(l[3]=V=>o(e).permissions=V)},null,40,R),[[O,o(e).permissions]]),r(f,{for:"permission_"+a.id,value:a.name},null,8,["for","value"])]))),128))])])],40,H)]),footer:n(()=>[r(T,{onClick:g},{default:n(()=>[h(c(s.lang().button.cancel),1)]),_:1}),r(P,{class:z(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing,onClick:b},{default:n(()=>[h(c(s.lang().button.save)+" "+c(o(e).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])])}}};export{te as default};
