import{p as j,y as C,O,c as V,w as n,o as p,a as e,t as i,b as o,s as d,x as c,u as _,d as m,g as B,F as D,z as P,D as U}from"./app-3a3de715.js";import{_ as N}from"./AppLayout-f2e74aa8.js";import{p as z,_ as A,T as E}from"./TablePagination-1eab0879.js";import{_ as F}from"./Breadcrumb-b03252d5.js";import{_ as T}from"./SelectInput-1ee6f51b.js";import{_ as L}from"./TextInput-88b66625.js";import M from"./Create-18a1a48e.js";import q from"./Edit-ae566be9.js";import G from"./Delete-399c468d.js";import H from"./Permission-5fde2a44.js";import{C as f}from"./index-95db454f.js";import{_ as J}from"./Checkbox-8f5c7869.js";import K from"./DeleteBulk-22a063bc.js";import"./Toast-fa5874a5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./SwitchDarkMode-6adf19e5.js";import"./SwitchLocale-be087b35.js";import"./ApplicationLogo-8b302b18.js";import"./DialogModal-866e76d7.js";import"./Modal-af5e7ee5.js";import"./InputLabel-fa1642b1.js";import"./PrimaryButton-b5fff3b2.js";import"./SecondaryButton-a7b8ea3b.js";import"./ActionButton-38c99d0b.js";import"./ConfirmationModal-2284c754.js";import"./DangerButton-8c0c28a0.js";const Q={class:"py-6"},R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-4"},W={class:"bg-white dark:bg-slate-800 overflow-hidden shadow sm:rounded"},X={class:"flex shrink-0 rounded overflow-hidden"},Y={class:"flex justify-end items-center gap-2"},Z={class:"flex space-x-2"},ee={class:"p-4 text-left"},te=e("th",{class:"p-4 text-center"},"#",-1),se={class:"flex justify-between items-center"},le={class:"flex justify-between items-center"},ae={class:"p-4 text-left"},re={class:"flex justify-between items-center"},oe=e("th",{class:"p-4 text-center sr-only"}," Action ",-1),ie={class:"whitespace-nowrap px-4 py-2"},ne=["value"],de={class:"whitespace-nowrap px-4 py-2 text-center"},ce={class:"whitespace-nowrap px-4 py-2"},pe={class:"flex items-center space-x-3"},me={class:"mt-2 shrink-0"},ue=["src","alt"],he={class:"mt-2 shrink-0"},_e={class:"truncate"},fe={class:"whitespace-nowrap truncate px-4 py-2"},be={class:"whitespace-nowrap px-4 py-2"},ge={key:0},ke={key:1},we={class:"whitespace-nowrap px-4 py-2"},ve={class:"whitespace-nowrap flex justify-end px-4 py-2"},ye={class:"flex w-fit rounded overflow-hidden"},Re={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,breadcrumbs:Object,perPage:Number},setup(b){const r=b,{_:y,debounce:x,pickBy:$}=z,t=j({params:{search:r.filters.search,field:r.filters.field,order:r.filters.order,perPage:r.perPage},selectedId:[],multipleSelect:!1,user:null}),u=l=>{t.params.field=l,t.params.order=t.params.order==="asc"?"desc":"asc"};C(()=>y.cloneDeep(t.params),x(()=>{let l=$(t.params);O.get(route("user.index"),l,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const S=l=>{var a;l.target.checked===!1?t.selectedId=[]:(a=r.users)==null||a.data.forEach(s=>{t.selectedId.push(s.id)})},I=()=>{var l;((l=r.users)==null?void 0:l.data.length)==t.selectedId.length?t.multipleSelect=!0:t.multipleSelect=!1};return(l,a)=>(p(),V(N,{title:r.title},{title:n(()=>[e("span",null,i(r.title),1)]),breadcrumb:n(()=>[o(F)]),default:n(()=>[e("div",Q,[e("div",R,[e("div",W,[o(E,null,{"table-action":n(()=>[e("div",X,[d(o(M,{title:r.title,roles:r.roles},null,8,["title","roles"]),[[c,l.can(["user create"])]]),d(o(K,{selectedId:t.selectedId,title:r.title,onClose:a[0]||(a[0]=s=>(t.selectedId=[],t.multipleSelect=!1))},null,8,["selectedId","title"]),[[c,t.selectedId.length!=0&&l.can(["user delete"])]])]),e("div",Y,[e("div",Z,[o(T,{class:"h-9 text-sm",modelValue:t.params.perPage,"onUpdate:modelValue":a[1]||(a[1]=s=>t.params.perPage=s),dataSet:l.$page.props.app.perpage},null,8,["modelValue","dataSet"])]),o(L,{modelValue:t.params.search,"onUpdate:modelValue":a[2]||(a[2]=s=>t.params.search=s),type:"search",class:"block h-9",placeholder:l.lang().placeholder.search},null,8,["modelValue","placeholder"])])]),"table-head":n(()=>[e("tr",null,[e("th",ee,[o(J,{checked:t.multipleSelect,"onUpdate:checked":a[3]||(a[3]=s=>t.multipleSelect=s),onChange:S},null,8,["checked"])]),te,e("th",{class:"p-4 cursor-pointer",onClick:a[4]||(a[4]=s=>u("name"))},[e("div",se,[e("span",null,i(l.lang().label.name),1),o(_(f),{class:"w-4 h-4"})])]),e("th",{class:"p-4 cursor-pointer",onClick:a[5]||(a[5]=s=>u("email"))},[e("div",le,[e("span",null,i(l.lang().label.email),1),o(_(f),{class:"w-4 h-4"})])]),e("th",ae,i(l.lang().label.role),1),e("th",{class:"p-4 cursor-pointer",onClick:a[6]||(a[6]=s=>u("created_at"))},[e("div",re,[e("span",null,i(l.lang().label.created),1),o(_(f),{class:"w-4 h-4"})])]),oe])]),"table-body":n(()=>[(p(!0),m(D,null,B(b.users.data,(s,g)=>{var k,w,v;return p(),m("tr",{key:g,class:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-200/30 hover:dark:bg-slate-900/20"},[e("td",ie,[d(e("input",{class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:I,value:s.id,"onUpdate:modelValue":a[7]||(a[7]=h=>t.selectedId=h)},null,40,ne),[[P,t.selectedId]])]),e("td",de,i(++g),1),e("td",ce,[e("div",pe,[d(e("div",me,[e("img",{src:s.profile_photo_url,alt:s.name,class:"rounded h-8 w-8 object-cover"},null,8,ue)],512),[[c,!s.profile_photo_path]]),d(e("div",he,[e("span",{class:"block rounded w-8 h-8 bg-cover bg-no-repeat bg-center",style:U("background-image: url('"+s.profile_photo_url+"');")},null,4)],512),[[c,s.profile_photo_path]]),e("p",_e,i(s.name),1)])]),e("td",fe,i(s.email),1),e("td",be,[(k=s.roles[0])!=null&&k.name?(p(),m("p",ge,[o(H,{permissions:(w=s.roles[0])==null?void 0:w.permissions,title:(v=s.roles[0])==null?void 0:v.name},null,8,["permissions","title"])])):(p(),m("p",ke,i(l.lang().label.not_selected),1))]),e("td",we,i(s.created_at),1),e("td",ve,[e("div",ye,[d(o(q,{title:r.title,user:t.user,onOpen:h=>t.user=s,roles:r.roles},null,8,["title","user","onOpen","roles"]),[[c,l.can(["user update"])]]),d(o(G,{title:r.title,user:t.user,onOpen:h=>t.user=s,roles:r.roles},null,8,["title","user","onOpen","roles"]),[[c,l.can(["user delete"])]])])])])}),128))]),"table-pagination":n(()=>[o(A,{links:r.users,filters:t.params},null,8,["links","filters"])]),_:1})])])])]),_:1},8,["title"]))}};export{Re as default};
